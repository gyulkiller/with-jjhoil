<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Yield - Gallery</title>
  <link rel="stylesheet" href="../styles.css" />
  <style>
    :root {
      --text: #1d1d1f;
      --muted: #6e6e73;
      --card-bg: #f5f5f7;
      --card-radius: 28px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background: #ffffff;
    }

    /* 페이지 로컬 헤더(히어로) 보정은 삭제하고 공용 헤더 사용 */

    /* 카드 트랙 (가로 스크롤 + 스냅) */
    .track-wrap {
      position: relative;
      overflow: visible; /* 하단 컨트롤을 카드 영역 밖에 배치할 수 있도록 */
      padding-bottom: 20px; /* 컨트롤을 위한 여백 */
    }
    .card-track {
      display: flex;
      gap: 24px;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      padding: 24px 24px 40px;
      margin: 0 auto;
      max-width: 1200px;
    }
    .card-track::-webkit-scrollbar { height: 10px; }
    .card-track::-webkit-scrollbar-track { background: transparent; }
    .card-track::-webkit-scrollbar-thumb { background: rgba(0,0,0,.15); border-radius: 999px; }

    /* 좌우 내비 버튼 */
    .nav-controls {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: -28px; /* 카드 영역 밖, 더 아래 */
      display: flex; gap: 10px; z-index: 5;
    }
    .nav-btn {
      width: 44px; height: 44px; border-radius: 50%; border: 1px solid rgba(0,0,0,.12);
      background: #ffffff; color: #000; display: grid; place-items: center; cursor: pointer;
      box-shadow: 0 6px 20px rgba(0,0,0,.12);
      transition: transform .15s ease, background .2s ease;
    }
    .nav-btn:hover { transform: translateY(-1px); background: #f8f8f8; }
    .nav-btn:disabled { opacity: .4; cursor: default; transform: none; }

    /* 개별 카드 */
    .card {
      position: relative;
      flex: 0 0 clamp(78%, 420px, 420px);
      height: 640px;
      background: var(--card-bg);
      border-radius: var(--card-radius);
      scroll-snap-align: start;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(0,0,0,.08);
    }
    @media (min-width: 960px) {
      .card { flex-basis: 360px; }
    }

    /* 모바일 최적화: 카드가 화면을 다 채우지 않고 옆 카드가 보이도록 */
    @media (max-width: 640px) {
      .card-track { padding: 16px 20px 28px; gap: 16px; scroll-padding-left: 20px; }
      .card { flex: 0 0 82vw; height: 520px; }
      .card-headings { min-height: 120px; }
      .title { font-size: 24px; }
      /* 모바일에서 이미지가 잘리지 않도록 비율 유지 */
      .visual img { object-fit: contain; }
      .nav-controls { bottom: -20px; }
    }

    .card-inner {
      position: absolute; inset: 0;
      display: flex; flex-direction: column;
    }

    .card-headings {
      padding: 24px; z-index: 2;
      /* 제목이 1~2줄이어도 이미지 영역이 흔들리지 않도록 고정 높이 확보 */
      min-height: 132px; /* 필요 시 120~160px 사이로 조정 가능 */
      display: grid; align-content: start; gap: 6px;
    }
    .eyebrow {
      font-size: 14px; color: var(--muted); font-weight: 600; letter-spacing: .02em;
    }
    .title {
      margin-top: 10px;
      font-size: 28px; line-height: 1.2; font-weight: 800; color: #000;
    }

    .visual { position: relative; flex: 1; display: flex; align-items: center; justify-content: center; padding: 24px; }
    .visual img { width: 100%; height: 100%; object-fit: cover; border-radius: calc(var(--card-radius) - 8px); }

    .glow {
      position: absolute; inset: 0; pointer-events: none; border-radius: var(--card-radius);
      background: radial-gradient(120% 120% at 0% 0%, rgba(0,122,255,.15), transparent 45%),
                  radial-gradient(120% 120% at 100% 0%, rgba(88,86,214,.14), transparent 45%),
                  radial-gradient(120% 120% at 100% 100%, rgba(255,45,85,.12), transparent 45%);
    }

    .more-btn {
      position: absolute; right: 16px; bottom: 16px;
      width: 40px; height: 40px; border-radius: 50%;
      border: none; background: rgba(0,0,0,.7); color: #fff; cursor: pointer;
      display: grid; place-items: center; transition: transform .2s ease, background .2s ease;
    }
    .more-btn:hover { transform: scale(1.06); background: rgba(0,0,0,.82); }

    /* SoundCloud music play button (next to +) */
    .music-btn {
      position: absolute; right: 64px; bottom: 16px;
      width: 40px; height: 40px; border-radius: 50%;
      border: none; background: rgba(0,0,0,.7); color: #fff; cursor: pointer;
      display: grid; place-items: center; transition: transform .2s ease, background .2s ease;
    }
    .music-btn:hover { transform: scale(1.06); background: rgba(0,0,0,.82); }
    .music-btn .icon-pause { display: none; }
    .music-btn.playing { background: #ffd24d; color: #111; }
    .music-btn.playing .icon-play { display: none; }
    .music-btn.playing .icon-pause { display: inline; }
    /* loading state */
    .music-btn.loading .icon-play, .music-btn.loading .icon-pause { display: none; }
    .music-btn.loading::after {
      content: "";
      width: 18px; height: 18px;
      border-radius: 50%;
      border: 2px solid currentColor;
      border-top-color: transparent;
      animation: spin .8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* 모달 */
    .modal {
      position: fixed; inset: 0; display: none; place-items: center; z-index: 1000;
      background: rgba(0,0,0,.6);
      padding: 24px;
    }
    .modal.open { display: grid; }
    .dialog {
      width: min(960px, 100%);
      max-height: 90dvh;
      overflow: auto;
      background: #fff; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,.3);
      animation: pop .18s ease;
    }
    @keyframes pop { from { transform: scale(.97); opacity: 0 } to { transform: scale(1); opacity: 1 } }

    .dialog-header { display:flex; justify-content: space-between; align-items: center; padding: 20px 24px; border-bottom: 1px solid #eee; }
    .dialog-title { font-size: 24px; font-weight: 800; }
    .close-btn { width: 36px; height: 36px; border-radius: 50%; border: none; background: #f2f2f7; cursor: pointer; display:grid; place-items:center; }
    .dialog-header .title-row { display:inline-flex; align-items:center; gap:8px; flex-wrap: nowrap; }
    .modal-music-btn {
      position: static;
      right: auto; bottom: auto; /* reset offsets from .music-btn */
      width: 32px; height: 32px; margin-left: 8px;
      display: inline-grid; place-items: center;
      vertical-align: middle; flex: 0 0 auto;
    }
    .modal-music-btn::after { margin: 0 auto; }
    .modal-music-btn.loading::after { width: 14px; height: 14px; }
    .dialog-body { padding: 16px 24px 24px; }
    .dialog-visual { border-radius: 16px; overflow: hidden; margin-bottom: 16px; background:#f5f5f7 }
    .dialog-visual img { width: 100%; height: auto; display:block; }
    .dialog-text { color: #333; line-height: 1.7; font-size: 16px; }
    .dialog-text h4 { font-size: 18px; font-weight: 700; margin: 12px 0 6px; }
    .dialog-text ul, .dialog-text ol { margin: 8px 0 12px 1.2rem; padding-left: 1.2rem; }
    .dialog-text li { margin: 4px 0; }

    .caption { color: var(--muted); font-size: 13px; margin-top: 8px; }

    /* 자연 섹션 (감성 히어로) */
    .nature-hero {
      position: relative;
      width: 100%;
      margin: 0 0 24px;
      border-radius: 0;
      overflow: hidden;
      background: #0b0b0b;
      box-shadow: 0 30px 80px rgba(0,0,0,.18);
    }
    .nature-media { position: relative; width: 100%; height: auto; }
    .nature-media img { width: 100%; height: auto; display: block; object-fit: contain; object-position: center; filter: saturate(1.05) contrast(1.02); }
    .nature-overlay { position: absolute; inset: 0; background:
      linear-gradient(180deg, rgba(0,0,0,.35) 0%, rgba(0,0,0,.1) 35%, rgba(0,0,0,.6) 100%),
      radial-gradient(80% 60% at 10% 10%, rgba(0,122,255,.18), transparent 60%);
      pointer-events: none; }
    .nature-content { position: absolute; inset: 0; display: flex; flex-direction: column; justify-content: flex-end; padding: 48px; color: #fff; }
    .nature-eyebrow { font-size: clamp(14px, 2vw, 18px); letter-spacing: .02em; opacity: .9; margin-bottom: 6px; }
    .nature-title { font-size: clamp(24px, 4.2vw, 48px); line-height: 1.1; font-weight: 800; margin: 0 0 14px; }
    .nature-desc { max-width: 900px; font-size: clamp(14px, 1.6vw, 18px); line-height: 1.75; color: #f1f1f1; opacity: .96; }
    .nature-title, .nature-eyebrow { text-shadow: 0 2px 8px rgba(0,0,0,.3); }

    /* Values grid */
    .values-grid { max-width: 1200px; margin: 32px auto 80px; padding: 0 24px; }
    .values-header h2 { font-size: clamp(28px, 4.2vw, 48px); margin: 0 0 6px; letter-spacing: -0.02em; }
    .values-header p { margin: 0 0 24px; color: var(--muted); font-size: clamp(14px, 1.6vw, 18px); }
    .values-cards { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
    .value-card { background: #fff; border-radius: 20px; padding: 28px; box-shadow: 0 10px 30px rgba(0,0,0,.08); border: 1px solid rgba(0,0,0,.06); display: flex; flex-direction: column; gap: 10px; }
    .v-icon { font-size: 28px; filter:grayscale(50%) }
    .v-title { font-size: 18px; margin: 0; }
    .v-desc { margin: 0; color: #333; line-height: 1.6; }

    @media (max-width: 960px) {
      .values-cards { grid-template-columns: 1fr 1fr; }
    }
    @media (max-width: 640px) {
      .values-grid { padding: 0 20px; }
      .values-cards { grid-template-columns: 1fr; gap: 16px; }
      .value-card { padding: 22px; }
    }

    @media (max-width: 640px) {
      .nature-hero { margin: 0 0 24px; border-radius: 0; background: #ffffff; }
      .nature-media { height: auto; }
      .nature-overlay { display: none; }
      .nature-content { position: static; padding: 16px 20px 20px; color: #1d1d1f; }
      .nature-title, .nature-eyebrow { text-shadow: none; }
      .nature-desc { color: #333; opacity: 1; }
    }

    /* 데스크탑: 화면 가로에 맞춰 꽉 차되, 이미지 전체 표시 */
    @media (min-width: 1024px) {
      .nature-media { height: auto; }
      .nature-media img { height: auto; object-fit: contain; display: block; }
    }

    /* 최하단 CTA 섹션 */
    .cta-section {
      max-width: 1200px;
      margin: 80px auto 120px;
      padding: 48px;
      border-radius: 28px;
      background: linear-gradient(135deg, rgba(76,175,80,0.08) 0%, rgba(129,199,132,0.05) 50%, rgba(165,214,167,0.03) 100%);
      box-shadow: 0 20px 60px rgba(0,0,0,.08);
      text-align: center;
    }
    body { padding-bottom: 30px; }
    .cta-title { font-size: clamp(24px, 4.2vw, 44px); margin: 0 0 10px; letter-spacing: -0.02em; }
    .cta-desc { color: var(--muted); font-size: clamp(14px, 1.6vw, 18px); margin: 0 0 24px; }
    .cta-btn {
      display: inline-flex; align-items: center; justify-content: center;
      gap: 8px; padding: 14px 22px; border-radius: 999px; border: 1px solid rgba(0,0,0,.08);
      background: #111; color: #fff; font-weight: 600; cursor: not-allowed; opacity: .7;
    }
    @media (max-width: 640px) {
      .cta-section { margin: 48px 20px 80px; padding: 28px; border-radius: 20px; }
    }
  </style>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9C4N2TREHT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} 
    gtag('js', new Date());
    gtag('config', 'G-9C4N2TREHT');
  </script>
</head>
<body>
  <header class="site-header" role="navigation" aria-label="Primary Navigation">
    <nav class="nav">
      <a class="brand" href="/"><img class="brand-logo" src="../svg/onlyu.svg" alt="그이름 로고" />&nbsp;함께 WITH</a>
      <ul class="nav-menu">
        <li><a href="/music">MUSIC</a></li>
        <li><a href="/yield">YIELD</a></li>
        <li><a href="http://instagram.com/thenames_kr">RECIPE</a></li>
        <li><a href="https://jjhoil.com">SHOP</a></li>
      </ul>
      <button class="nav-toggle" aria-label="메뉴 열기" aria-controls="mobileMenu" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
    </nav>
  </header>
  <div class="mobile-menu" id="mobileMenu" aria-hidden="true">
    <div class="mm-inner">
      <div class="mm-header">
        <button class="mm-close" aria-label="메뉴 닫기">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>
      <nav>
        <ul>
          <li><a href="/music">MUSIC</a></li>
          <li><a href="/yield">YIELD</a></li>
          <li><a href="http://instagram.com/thenames_kr">RECIPE</a></li>
          <li><a href="https://jjhoil.com">SHOP</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <!-- 자연 감성 섹션 -->
  <section class="nature-hero" aria-labelledby="nature-title">
    <div class="nature-media">
      <img src="image/nature.png" alt="빗방울을 머금은 새싹과 자연의 배경" />
      <div class="nature-overlay"></div>
    </div>
    <div class="nature-content">
      <div class="nature-eyebrow">양심깨박의 선택은</div>
      <h2 class="nature-title" id="nature-title">자연에 대한 양보입니다</h2>
      <p class="nature-desc">
        양심깨박은 자연과 인간, 그리고 생명 사이의 조화로운 순환을 고민합니다. 우리는 세척에서 로스팅, 착유에 이르기까지 모든 과정을 투명하게 드러내며, 신뢰란 서로의 진실함을 나누는 데서 비롯된다고 믿습니다. 양심깨박은 부산물이 아닌 자연과 인간 사이에 새로운 식문화의 가능성을 열어 주는 매개체입니다. 우리는 '양심'이라는 가치에서 파생한 정직과 책임의 원칙 아래 모든 위해 요소를 철저히 걷어내어, 사람과 반려동물이 함께 안심하고 즐길 수 있는 새로운 세대의 식재료를 제시합니다. 풍요로운 영양을 품은 깨박은 다시 흙으로 돌아가 생명을 일으키는 밑거름이 되며, 이 순환 속에서 우리는 자연에 대한 양보와 존중의 가치를 실천합니다.
      </p>
    </div>
  </section>

<!-- 가치 섹션: 아이콘 카드 그리드 -->
<section class="values-grid" aria-labelledby="values-title">
    <div class="values-header">
      <h2 id="values-title">양심깨박의 가치</h2>
      <p>자연과 식탁, 반려동물과 사람을 하나로 잇는 실천</p>
    </div>
    <div class="values-cards">
      <article class="value-card">
        <div class="v-icon">🔍</div>
        <h3 class="v-title">투명한 공정</h3>
        <p class="v-desc">세척부터 로스팅, 착유까지 전 과정을 투명하게 공개하여 신뢰를 나눕니다.</p>
      </article>
      <article class="value-card">
        <div class="v-icon">🍽️</div>
        <h3 class="v-title">다양한 활용</h3>
        <p class="v-desc">볶음 요리, 샐러드, 죽 토핑, 소스 등 다양한 요리에 안심하고 활용할 수 있습니다.</p>
      </article>
      <article class="value-card">
        <div class="v-icon">🐾</div>
        <h3 class="v-title">반려동물 안전</h3>
        <p class="v-desc">정직과 책임을 바탕으로 위해 요소를 완벽히 배제해 반려동물 간식 보조원료로도 안전합니다.</p>
      </article>
      <article class="value-card">
        <div class="v-icon">♻️</div>
        <h3 class="v-title">순환의 밑거름</h3>
        <p class="v-desc">풍부한 영양을 담은 깨박은 화분과 정원 토양에 뿌려 생명력을 되살립니다.</p>
      </article>
      <article class="value-card">
        <div class="v-icon">📚</div>
        <h3 class="v-title">교육·사회적 가치</h3>
        <p class="v-desc">‘버려지는 부분’에 대한 인식을 바꾸는 교육과 체험으로 지속가능한 식문화 전환을 돕습니다.</p>
      </article>
      <article class="value-card">
        <div class="v-icon">🌱</div>
        <h3 class="v-title">공존의 실천</h3>
        <p class="v-desc">인간과 반려동물, 흙과 식탁 사이에 경계를 두지 않습니다. 깨박은 사람과 자연 우리 모두의 음식입니다.</p>
      </article>
    </div>
  </section>

  <section class="track-wrap">
    <div class="card-track">
        
                                   <!-- Card 2 -->
          <article class="card" aria-labelledby="c2-title" data-target="modal-2">
          <div class="card-inner">
            <div class="card-headings">
              <div class="eyebrow">양심깨박 샐러드</div>
              <h2 class="title" id="c2-title">끝까지 아삭한 신선함</h2>
            </div>
            <div class="visual">
              <img src="image/Untitled-2.png" alt="양심깨박 샐러드"/>
            </div>
          <div class="glow"></div>
            <button class="music-btn" aria-label="음악 재생" data-sc-url="https://soundcloud.com/th3name/stay-crisp?in=th3name/sets/visible-truth">
              <svg class="icon-play" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7L8 5z" fill="currentColor"/></svg>
              <svg class="icon-pause" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 5h4v14H7zM13 5h4v14h-4z" fill="currentColor"/></svg>
            </button>
            <button class="more-btn" aria-label="더 보기" data-target="modal-2">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            </button>
          </div>
        </article>

        <!-- Card 3 -->
        <article class="card" aria-labelledby="c3-title" data-target="modal-3">
          <div class="card-inner">
            <div class="card-headings">
              <div class="eyebrow">양심깨박 죽</div>
              <h2 class="title" id="c3-title">한 숟갈마다 느껴지는 배려</h2>
            </div>
            <div class="visual">
              <img src="image/Untitled-1.png" alt="인물 사진" />
            </div>
            <div class="glow"></div>
            <button class="music-btn" aria-label="음악 재생" data-sc-url="https://soundcloud.com/th3name/fmfp1fgis0ht?in=th3name/sets/visible-truth">
              <svg class="icon-play" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7L8 5z" fill="currentColor"/></svg>
              <svg class="icon-pause" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 5h4v14H7zM13 5h4v14h-4z" fill="currentColor"/></svg>
            </button>
            <button class="more-btn" aria-label="더 보기" data-target="modal-3">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            </button>
          </div>
        </article>
       
       <!-- Card 4: 볶음밥 -->
       <article class="card" aria-labelledby="c4-title" data-target="modal-4">
         <div class="card-inner">
           <div class="card-headings">
             <div class="eyebrow">양심깨박 볶음밥</div>
             <h2 class="title" id="c4-title">따뜻한 집밥 한끼</h2>
           </div>
           <div class="visual">
             <img src="image/Untitled-3.png" alt="따끈한 볶음밥" />
           </div>
           <div class="glow"></div>
           <button class="music-btn" aria-label="음악 재생" data-sc-url="https://soundcloud.com/th3name/l8v3stjz9d83?in=th3name/sets/visible-truth">
             <svg class="icon-play" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7L8 5z" fill="currentColor"/></svg>
             <svg class="icon-pause" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 5h4v14H7zM13 5h4v14h-4z" fill="currentColor"/></svg>
           </button>
           <button class="more-btn" aria-label="더 보기" data-target="modal-4">
             <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
           </button>
         </div>
       </article>

       <!-- Card 5: 양심깨박 소스 -->
       <article class="card" aria-labelledby="c5-title" data-target="modal-5">
         <div class="card-inner">
           <div class="card-headings">
             <div class="eyebrow">양심깨박 소스</div>
             <h2 class="title" id="c5-title">요리의 핵심이 되다.</h2>
           </div>
           <div class="visual">
             <img src="image/recipe4.png" alt="양심깨박 소스" />
           </div>
           <div class="glow"></div>
           <button class="music-btn" aria-label="음악 재생" data-sc-url="https://soundcloud.com/th3name/seed-of-the-end?in=th3name/sets/visible-truth">
             <svg class="icon-play" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7L8 5z" fill="currentColor"/></svg>
             <svg class="icon-pause" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 5h4v14H7zM13 5h4v14h-4z" fill="currentColor"/></svg>
           </button>
           <button class="more-btn" aria-label="더 보기" data-target="modal-5">
             <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
           </button>
         </div>
       </article>

       <!-- Card 6: 양심깨박 단호박 쿠키 (반려견용) -->
       <article class="card" aria-labelledby="c6-title" data-target="modal-6">
         <div class="card-inner">
           <div class="card-headings">
             <div class="eyebrow">반려견 수제 간식 양심깨박 단호박 쿠키</div>
             <h2 class="title" id="c6-title">우리 강아지를 위한, 양심이 만든 쿠키</h2>
           </div>
           <div class="visual">
             <img src="image/Untitled-4.png" alt="양심깨박 단호박 쿠키" />
           </div>
           <div class="glow"></div>
            <button class="music-btn" aria-label="음악 재생" data-sc-url="https://soundcloud.com/th3name/cookie-day?in=th3name/sets/visible-truth">
              <svg class="icon-play" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7L8 5z" fill="currentColor"/></svg>
              <svg class="icon-pause" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 5h4v14H7zM13 5h4v14h-4z" fill="currentColor"/></svg>
            </button>
           <button class="more-btn" aria-label="더 보기" data-target="modal-6">
             <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
           </button>
         </div>
       </article>

      <!-- Card 1: 양심깨박 화분 비료 (마지막으로 이동) -->
      <article class="card" aria-labelledby="c1-title" data-target="modal-1">
        <div class="card-inner">
          <div class="card-headings">
            <div class="eyebrow">양심깨박 화분 비료</div>
            <h2 class="title" id="c1-title">생명을 일으키는 밑거름</h2>
          </div>
          <div class="visual">
            <img src="image/6b3eedc3-d5a6-4559-b3e3-92e0af85af60.png" />
          </div>
          <div class="glow"></div>
          <button class="music-btn" aria-label="음악 재생" data-sc-url="https://soundcloud.com/th3name/yfeg9lxjjzjp?in=th3name/sets/visible-truth">
            <svg class="icon-play" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7L8 5z" fill="currentColor"/></svg>
            <svg class="icon-pause" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 5h4v14H7zM13 5h4v14h-4z" fill="currentColor"/></svg>
          </button>
          <button class="more-btn" aria-label="더 보기" data-target="modal-1">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
        </div>
      </article>

    </div>

     
    <!-- 좌우 내비 버튼 -->
    <div class="nav-controls" aria-hidden="false">
      <button class="nav-btn" id="prevBtn" aria-label="이전 카드">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 6l-6 6 6 6" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>
      <button class="nav-btn" id="nextBtn" aria-label="다음 카드">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 6l6 6-6 6" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>
    </div>
  </section>

  <!-- Modals -->
  <!-- SoundCloud API and hidden backend for yield page -->
  <script src="https://w.soundcloud.com/player/api.js"></script>
  <iframe id="yield-sc-backend" allow="autoplay" title="SoundCloud backend" style="position:absolute; width:1px; height:1px; border:0; opacity:0; pointer-events:none;"></iframe>
  <div class="modal" id="modal-1" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
    <div class="dialog">
      <div class="dialog-header">
        <div class="title-row">
          <h3 class="dialog-title" id="modal-1-title">양심깨박 화분 비료</h3>
          <button class="music-btn modal-music-btn" aria-label="음악 재생" data-sc-url="https://soundcloud.com/th3name/yfeg9lxjjzjp?in=th3name/sets/visible-truth">
            <svg class="icon-play" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7L8 5z" fill="currentColor"/></svg>
            <svg class="icon-pause" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 5h4v14H7zM13 5h4v14h-4z" fill="currentColor"/></svg>
          </button>
        </div>
        <button class="close-btn" data-close>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6l12 12M18 6L6 18" stroke="#000" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>
      <div class="dialog-body">
        <div class="dialog-text">
          <p>양심깨박을 활용한 자연 친화적 화분 비료입니다.</p>

          <h4>재료</h4>
          <ul>
            <li>양심깨박 178 1컵</li>
            <li>흙 2컵</li>
            <li>물 1컵</li>
            <li>화분 1개</li>
          </ul>

          <h4>만드는 방법</h4>
          <ol>
            <li>양심깨박을 잘게 부숴줍니다.</li>
            <li>화분에 흙을 넣고 양심깨박을 섞어줍니다.</li>
            <li>물을 적당히 뿌려서 흙을 촉촉하게 만듭니다.</li>
            <li>식물을 심고 정기적으로 물을 줍니다.</li>
          </ol>
          <div class="caption">Tip: 물 주기와 양은 식물 종류와 계절에 맞게 조절하세요.</div>
        <div class="dialog-visual"><img src="image/6b3eedc3-d5a6-4559-b3e3-92e0af85af60.png" alt="Apple Pay 교통카드 시각" /></div>

        </div>
      </div>
    </div>
    
</div>
    <div class="modal" id="modal-2" role="dialog" aria-modal="true" aria-labelledby="modal-2-title">
    <div class="dialog">
      <div class="dialog-header">
        <div class="title-row">
          <h3 class="dialog-title" id="modal-2-title">양심깨박 샐러드</h3>
          <button class="music-btn modal-music-btn" aria-label="음악 재생" data-sc-url="https://soundcloud.com/th3name/stay-crisp?in=th3name/sets/visible-truth">
            <svg class="icon-play" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7L8 5z" fill="currentColor"/></svg>
            <svg class="icon-pause" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 5h4v14H7zM13 5h4v14h-4z" fill="currentColor"/></svg>
          </button>
        </div>
        <button class="close-btn" data-close>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6l12 12M18 6L6 18" stroke="#000" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>
      <div class="dialog-body">
        
        <div class="dialog-text">
          <p>신선한 채소와 양심깨박을 조합한 건강한 샐러드입니다. 잘 건조된 양심깨박은 야채의 수분을 대신 머금어줘서 오래도록 샐러드의 아삭함을 유지시켜줍니다.</p>

          <h4>재료</h4>
          <ul>
            <li>양심깨박 138 2큰술</li>
            <li>양상추 2잎</li>
            <li>토마토 1개</li>
            <li>오이 1/2개</li>
            <li>양심참기름 138 1큰술</li>
            <li>레몬즙 1작은술</li>
            <li>소금, 후추 약간</li>
          </ul>

          <h4>만드는 방법</h4>
          <ol>
            <li>양상추는 적당한 크기로 찢고, 토마토와 오이는 썰어둡니다.</li>
            <li>양심깨박을 가볍게 볶아 향을 내줍니다.</li>
            <li>올리브유, 레몬즙, 소금, 후추로 드레싱을 만듭니다.</li>
            <li>채소와 양심깨박을 섞고 드레싱을 뿌려 완성합니다.</li>
          </ol>
          <div class="dialog-visual"><img src="image/Untitled-2.png" alt="양심깨박 샐러드" /></div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="modal-3" role="dialog" aria-modal="true" aria-labelledby="modal-3-title">
    <div class="dialog">
      <div class="dialog-header">
        <div class="title-row">
          <h3 class="dialog-title" id="modal-3-title">양심깨박 죽</h3>
          <button class="music-btn modal-music-btn" aria-label="음악 재생" data-sc-url="https://soundcloud.com/th3name/fmfp1fgis0ht?in=th3name/sets/visible-truth">
            <svg class="icon-play" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7L8 5z" fill="currentColor"/></svg>
            <svg class="icon-pause" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 5h4v14H7zM13 5h4v14h-4z" fill="currentColor"/></svg>
          </button>
        </div>
        <button class="close-btn" data-close>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6l12 12M18 6L6 18" stroke="#000" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>
      <div class="dialog-body">
        <div class="dialog-text">
          <p>부드럽고 영양가 있는 양심깨박 죽입니다.</p>
          <h4>재료</h4>

          <ul>
            <li>쌀 1컵</li>
            <li>양심깨박 167 3큰술</li>
            <li>물 6컵</li>
            <li>소금 약간</li>
            <li>양심참기름 167 1작은술</li>
          </ul>

          <h4>만드는 방법</h4>
          <ol>
            <li>쌀을 깨끗이 씻어 30분간 불립니다.</li>
            <li>냄비에 물을 붓고 쌀을 넣어 끓입니다.</li>
            <li>쌀이 퍼지면 양심깨박을 넣고 저어줍니다.</li>
            <li>소금과 참기름을 넣어 간을 맞춰 완성합니다.</li>
          </ol>
        <div class="dialog-visual"><img src="image/Untitled-1.png" alt="따뜻한 양심깨박 죽" /></div>

        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="modal-4" role="dialog" aria-modal="true" aria-labelledby="modal-4-title">
    <div class="dialog">
      <div class="dialog-header">
        <div class="title-row">
          <h3 class="dialog-title" id="modal-4-title">양심깨박 볶음밥</h3>
          <button class="music-btn modal-music-btn" aria-label="음악 재생" data-sc-url="https://soundcloud.com/th3name/l8v3stjz9d83?in=th3name/sets/visible-truth">
            <svg class="icon-play" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7L8 5z" fill="currentColor"/></svg>
            <svg class="icon-pause" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 5h4v14H7zM13 5h4v14h-4z" fill="currentColor"/></svg>
          </button>
        </div>
        <button class="close-btn" data-close>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6l12 12M18 6L6 18" stroke="#000" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>
      <div class="dialog-body">
        <div class="dialog-text">
          <p>고소한 양심깨박이 들어간 건강한 볶음밥입니다. 남겨진 재료들로 따뜻한 한 끼를 완성해보세요.</p>

          <h4>재료</h4>
          <ul>
            <li>밥 2공기</li>
            <li>양심깨박 167 2큰술</li>
            <li>당근 1/2개</li>
            <li>양파 1/2개</li>
            <li>대파 1대</li>
            <li>계란 1개</li>
            <li>양심참기름 178</li>
            <li>간장 1큰술</li>
            <li>소금, 후추 약간</li>
          </ul>

          <h4>만드는 방법</h4>
          <ol>
            <li>당근, 양파, 대파를 잘게 썬다.</li>
            <li>팬에 양심깨박을 살짝 볶아 고소한 향을 낸다.</li>
            <li>채소와 계란을 넣고 함께 볶는다.</li>
            <li>밥, 간장, 소금, 후추를 넣어 간한다.</li>
            <li>마지막에 참기름을 취향에 맞춰 뿌려 완성한다.</li>
          </ol>

          <div class="dialog-visual"><img src="image/Untitled-3.png" alt="양심깨박 볶음밥" /></div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="modal-5" role="dialog" aria-modal="true" aria-labelledby="modal-5-title">
    <div class="dialog">
      <div class="dialog-header">
        <div class="title-row">
          <h3 class="dialog-title" id="modal-5-title">양심깨박 소스</h3>
          <button class="music-btn modal-music-btn" aria-label="음악 재생" data-sc-url="https://soundcloud.com/th3name/seed-of-the-end?in=th3name/sets/visible-truth">
            <svg class="icon-play" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7L8 5z" fill="currentColor"/></svg>
            <svg class="icon-pause" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 5h4v14H7zM13 5h4v14h-4z" fill="currentColor"/></svg>
          </button>
        </div>
        <button class="close-btn" data-close>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6l12 12M18 6L6 18" stroke="#000" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>
      <div class="dialog-body">
        <div class="dialog-text">
          <p>다양한 요리에 활용할 수 있는 양심깨박 소스입니다.</p>

          <h4>재료</h4>
          <ul>
            <li>양심깨박 167 4큰술</li>
            <li>마늘 2쪽</li>
            <li>간장 2큰술</li>
            <li>식초 1큰술</li>
            <li>설탕 1작은술</li>
            <li>양심참기름 167 큰술</li>
            <li>깨 1큰술</li>
          </ul>

          <h4>만드는 방법</h4>
          <ol>
            <li>양심깨박을 가볍게 볶아 향을 내줍니다.</li>
            <li>마늘을 다져서 준비합니다.</li>
            <li>모든 재료를 섞어서 소스를 만듭니다.</li>
            <li>냉장고에 30분간 숙성시켜 완성합니다.</li>
          </ol>

          <div class="dialog-visual"><img src="image/recipe4.png" alt="양심깨박 소스" /></div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="modal-6" role="dialog" aria-modal="true" aria-labelledby="modal-6-title">
    <div class="dialog">
      <div class="dialog-header">
        <div class="title-row">
          <h3 class="dialog-title" id="modal-6-title">양심깨박 단호박 쿠키 (반려견 영양간식)</h3>
          <button class="music-btn modal-music-btn" aria-label="음악 재생" data-sc-url="https://soundcloud.com/th3name/cookie-day?in=th3name/sets/visible-truth">
            <svg class="icon-play" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7L8 5z" fill="currentColor"/></svg>
            <svg class="icon-pause" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 5h4v14H7zM13 5h4v14h-4z" fill="currentColor"/></svg>
          </button>
        </div>
        <button class="close-btn" data-close>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6l12 12M18 6L6 18" stroke="#000" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>
      <div class="dialog-body">
        <div class="dialog-text">
          <p>반려견용 수제 간식 레시피입니다. 섬유질과 단백질이 풍부한 참깨박은 곱게 갈수록 소화가 잘 되고 영양 흡수가 쉬워집니다. 재료는 알러지 여부를 확인하고 급여하세요.</p>

          <h4>재료</h4>
          <ul>
            <li>단호박 퓌레 100g (껍질 제거 후 찐 단호박)</li>
            <li>달걀 1개</li>
            <li>양심깨박 138 10g (곱게 분쇄된 참깨/들깨/흑임자박)</li>
            <li>쌀가루 100g (또는 현미·고구마가루 일부 대체 가능)</li>
          </ul>

          <h4>만드는 법</h4>
          <ol>
            <li>단호박과 달걀을 갈아 반죽 재료와 섞습니다.</li>
            <li>반죽을 한 숟가락씩 떠 유산지에 올려주세요.</li>
            <li>160℃ 오븐에서 15분 구워줍니다.</li>
          </ol>

          <h4>TIP</h4>
          <ul>
            <li>깨박은 곱게 갈아주세요.</li>
            <li>소형견은 작고 얇게 만들어 주세요.</li>
            <li>하루 1~2개 이하 급여 (성견·노령견용)</li>
          </ul>

          <div class="dialog-visual"><img src="image/Untitled-4.png" alt="양심깨박 단호박 쿠키" /></div>
        </div>
      </div>
    </div>
  </div>

  <!-- 최하단 CTA 섹션 -->
  <section class="cta-section" aria-labelledby="cta-title">
    <h2 class="cta-title" id="cta-title">양심깨박과 함께하는 여정에 동참하세요</h2>
    <p class="cta-desc">주방에서 정원까지 이어지는 '자연에 대한 양보'의 여정에 함께하시겠습니까?</p>
    <button class="cta-btn" disabled>함께할 여정을 준비 중입니다.</button>
  </section>
  <section style="height: 20px;">

  </section>

  <script>
    // 모달 열기/닫기 핸들러
    const open = (id) => {
      const el = document.getElementById(id);
      if (!el) return;
      el.classList.add('open');
      document.body.style.overflow = 'hidden';
    };
    const close = (modal) => {
      modal.classList.remove('open');
      document.body.style.overflow = '';
    };

    document.querySelectorAll('.more-btn').forEach(btn => {
      btn.addEventListener('click', () => open(btn.dataset.target));
    });
    // 카드 전체를 클릭 영역으로 확장
    document.querySelectorAll('.card[data-target]').forEach(card => {
      card.style.cursor = 'pointer';
      card.addEventListener('click', (e) => {
        // 내부 버튼 클릭은 중복처리 방지
        if ((e.target).closest && (e.target).closest('.more-btn')) return;
        const id = card.getAttribute('data-target');
        if (id) open(id);
      });
    });

    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) close(modal);
      });
      modal.querySelector('[data-close]')?.addEventListener('click', () => close(modal));
    });

    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        document.querySelectorAll('.modal.open').forEach(close);
      }
    });

    // 좌우 내비 버튼 동작: 현재 스크롤 위치 기준으로 다음/이전 카드로 스냅
    const track = document.querySelector('.card-track');
    const cards = Array.from(document.querySelectorAll('.card'));
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    // SoundCloud mini player (one shared hidden widget)
    const scIframe = document.getElementById('yield-sc-backend');
    let scWidget = null;
    let scReady = false;
    let currentUrl = '';
    let currentBtn = null;

    // Group card/modal buttons by track URL for state sync
    const urlToButtons = new Map();
    function indexMusicButtons(){
      urlToButtons.clear();
      document.querySelectorAll('.music-btn').forEach((btn)=>{
        const url = btn.getAttribute('data-sc-url');
        if(!url) return;
        const list = urlToButtons.get(url) || [];
        list.push(btn);
        urlToButtons.set(url, list);
      });
    }
    indexMusicButtons();

    // Pre-initialize backend src exactly like /music: load one URL silently at startup
    const DEFAULT_URL = 'https://soundcloud.com/th3name/stay-crisp?in=th3name/sets/visible-truth';
    (function setBackendSrc(){
      const params = new URLSearchParams({ url: DEFAULT_URL, auto_play: 'false', hide_related: 'true', show_comments: 'false', show_user: 'false', show_reposts: 'false', show_teaser: 'false', visual: 'false' });
      scIframe.src = 'https://w.soundcloud.com/player/?' + params.toString();
    })();

    // Create widget on load (same as /music)
    window.addEventListener('load', function(){
      try {
        scWidget = SC.Widget(scIframe);
        scWidget.bind(SC.Widget.Events.READY, function(){ scReady = true; });
        scWidget.bind(SC.Widget.Events.PLAY, function(){ if (currentUrl) { clearAllPlaying(); setGroupState(currentUrl, 'playing'); } });
        scWidget.bind(SC.Widget.Events.PAUSE, function(){ if (currentUrl) { setGroupState(currentUrl, 'idle'); } });
      } catch(_) {}
    });

    function setGroupState(url, state){
      const list = urlToButtons.get(url) || [];
      list.forEach((b)=>{
        if(state === 'loading'){
          b.classList.add('loading');
          b.classList.remove('playing');
        } else if(state === 'playing'){
          b.classList.remove('loading');
          b.classList.add('playing');
        } else { // idle
          b.classList.remove('loading');
          b.classList.remove('playing');
        }
      });
    }
    function clearAllPlaying(){
      document.querySelectorAll('.music-btn').forEach(b=>b.classList.remove('playing','loading'));
    }

    function initWidget(initialUrl){
      const params = new URLSearchParams({
        url: initialUrl,
        auto_play: 'false',
        hide_related: 'true',
        show_comments: 'false',
        show_user: 'false',
        show_reposts: 'false',
        show_teaser: 'false',
        visual: 'false'
      });
      scIframe.src = 'https://w.soundcloud.com/player/?' + params.toString();
      scWidget = window.SC && window.SC.Widget ? window.SC.Widget(scIframe) : null;
      if (!scWidget) return;
      try {
        scWidget.bind(window.SC.Widget.Events.READY, function(){ scReady = true; });
        scWidget.bind(window.SC.Widget.Events.PLAY, function(){ if (currentUrl) { clearAllPlaying(); setGroupState(currentUrl,'playing'); } });
        scWidget.bind(window.SC.Widget.Events.PAUSE, function(){ if (currentUrl) { setGroupState(currentUrl,'idle'); } });
      } catch(_){}
    }

    function tryPlayWithRetry(timeoutMs){
      const start = Date.now();
      const attempt = () => {
        try { scWidget.play(); } catch(_) {}
        try {
          scWidget.isPaused(function(paused){
            if (!paused) return; // playing started
            if (Date.now() - start > timeoutMs) { setGroupState(currentUrl,'idle'); return; }
            setTimeout(attempt, 300);
          });
        } catch(_) { if (Date.now() - start <= timeoutMs) setTimeout(attempt, 300); }
      };
      attempt();
    }

    function loadAndPlay(url, btn){
      // widget should be pre-initialized on load; if not ready yet, wait then load
      if (!scWidget) return; // very early click before load
      if (!scReady) {
        currentBtn = btn; currentUrl = url; setGroupState(url,'loading');
        try { scWidget.bind(SC.Widget.Events.READY, function onR(){ scWidget.unbind(SC.Widget.Events.READY, onR); try { scWidget.load(url, { auto_play: true, hide_related: true, show_comments: false, show_user: false, show_reposts: false, show_teaser: false, visual: false }); } catch(_) {} }); } catch(_) {}
        return;
      }
      // if a different url, load it
      if (currentUrl !== url) {
        if (currentUrl) setGroupState(currentUrl,'idle');
        currentUrl = url;
        currentBtn = btn;
        setGroupState(url,'loading');
        try { scWidget.load(url, { auto_play: true, hide_related: true, show_comments: false, show_user: false, show_reposts: false, show_teaser: false, visual: false }); } catch(_) {}
        return;
      }
      // same url -> toggle
      try {
        scWidget.isPaused(function(paused){
          if (paused) { setGroupState(url,'loading'); try { scWidget.play(); } catch(_) {} }
          else { scWidget.pause(); setGroupState(url,'idle'); }
        });
      } catch(_) {}
    }

    function updateButtons() {
      const scrollLeft = track.scrollLeft;
      const maxScroll = track.scrollWidth - track.clientWidth - 1;
      const tol = 2;
      prevBtn.disabled = scrollLeft <= tol;
      nextBtn.disabled = scrollLeft >= maxScroll - tol;
    }

    function scrollToIndex(index) {
      const clamped = Math.max(0, Math.min(index, cards.length - 1));
      const targetLeft = cards[clamped].offsetLeft; // 트랙 기준 카드의 좌측 위치
      track.scrollTo({ left: targetLeft, behavior: 'smooth' });
      setTimeout(updateButtons, 400);
    }

    function getCurrentIndex() {
      const left = track.scrollLeft;
      let bestIdx = 0;
      let bestDist = Infinity;
      cards.forEach((card, i) => {
        const dist = Math.abs(card.offsetLeft - left);
        if (dist < bestDist) { bestDist = dist; bestIdx = i; }
      });
      return bestIdx;
    }

    prevBtn.addEventListener('click', () => scrollToIndex(getCurrentIndex() - 1));
    nextBtn.addEventListener('click', () => scrollToIndex(getCurrentIndex() + 1));
    // attach click to music button
    document.querySelectorAll('.music-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        indexMusicButtons();
        const url = btn.getAttribute('data-sc-url');
        if (!scReady) {
          currentBtn = btn; currentUrl = url; setGroupState(url, 'loading');
          const wait = () => { if (!scReady) { requestAnimationFrame(wait); return; } loadAndPlay(url, btn); };
          wait();
        } else {
          loadAndPlay(url, btn);
        }
      });
    });
    track.addEventListener('scroll', () => { requestAnimationFrame(updateButtons); });
    window.addEventListener('resize', updateButtons);
    updateButtons();
  </script>
  <script>
    (function(){
      const toggle = document.querySelector('.nav-toggle');
      const menu = document.getElementById('mobileMenu');
      const closeBtn = menu?.querySelector('.mm-close');
      function open(){ menu?.classList.add('open'); document.body.classList.add('menu-open'); toggle?.setAttribute('aria-expanded','true'); menu?.setAttribute('aria-hidden','false'); }
      function close(){ menu?.classList.remove('open'); document.body.classList.remove('menu-open'); toggle?.setAttribute('aria-expanded','false'); menu?.setAttribute('aria-hidden','true'); }
      toggle?.addEventListener('click', open);
      closeBtn?.addEventListener('click', close);
      menu?.addEventListener('click', (e)=>{ if(e.target===menu) close(); });
      window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') close(); });
      // Load SC API once for mini player
      if(!document.getElementById('sc-api')){
        const s = document.createElement('script');
        s.id = 'sc-api';
        s.src = 'https://w.soundcloud.com/player/api.js';
        s.async = true;
        document.body.appendChild(s);
      }
    })();
  </script>
</body>
</html>
