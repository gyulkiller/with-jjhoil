<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Yield - Gallery</title>
  <style>
    :root {
      --text: #1d1d1f;
      --muted: #6e6e73;
      --card-bg: #f5f5f7;
      --card-radius: 28px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Helvetica Neue", Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background: #ffffff;
    }

    /* 헤더 */
    .site-header {
      max-width: 1200px;
      margin: 32px auto 8px;
      padding: 0 24px;
    }
    .site-header h1 {
      font-size: clamp(40px, 7vw, 88px);
      line-height: 0.95;
      letter-spacing: -0.02em;
      margin: 0 0 8px;
      font-weight: 700;
    }
    .site-header p {
      margin: 0;
      color: var(--muted);
      font-size: clamp(14px, 2.4vw, 20px);
    }

    /* 카드 트랙 (가로 스크롤 + 스냅) */
    .track-wrap {
      position: relative;
      overflow: hidden;
    }
    .card-track {
      display: flex;
      gap: 24px;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      padding: 24px 24px 40px;
      margin: 0 auto;
      max-width: 1200px;
    }
    .card-track::-webkit-scrollbar { height: 10px; }
    .card-track::-webkit-scrollbar-track { background: transparent; }
    .card-track::-webkit-scrollbar-thumb { background: rgba(0,0,0,.15); border-radius: 999px; }

    /* 좌우 내비 버튼 */
    .nav-controls { position: absolute; right: 24px; bottom: 6px; display: flex; gap: 10px; z-index: 5; }
    .nav-btn {
      width: 44px; height: 44px; border-radius: 50%; border: 1px solid rgba(0,0,0,.12);
      background: #ffffff; color: #000; display: grid; place-items: center; cursor: pointer;
      box-shadow: 0 6px 20px rgba(0,0,0,.12);
      transition: transform .15s ease, background .2s ease;
    }
    .nav-btn:hover { transform: translateY(-1px); background: #f8f8f8; }
    .nav-btn:disabled { opacity: .4; cursor: default; transform: none; }

    /* 개별 카드 */
    .card {
      position: relative;
      flex: 0 0 clamp(78%, 420px, 420px);
      height: 640px;
      background: var(--card-bg);
      border-radius: var(--card-radius);
      scroll-snap-align: start;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(0,0,0,.08);
    }
    @media (min-width: 960px) {
      .card { flex-basis: 360px; }
    }

    /* 모바일 최적화: 카드가 화면을 다 채우지 않고 옆 카드가 보이도록 */
    @media (max-width: 640px) {
      .card-track { padding: 16px 16px 28px; gap: 16px; scroll-padding-left: 16px; }
      .card { flex: 0 0 82vw; height: 520px; }
      .card-headings { min-height: 120px; }
      .title { font-size: 24px; }
      .nav-controls { left: 50%; right: auto; transform: translateX(-50%); bottom: 0; }
    }

    .card-inner {
      position: absolute; inset: 0;
      display: flex; flex-direction: column;
    }

    .card-headings {
      padding: 24px; z-index: 2;
      /* 제목이 1~2줄이어도 이미지 영역이 흔들리지 않도록 고정 높이 확보 */
      min-height: 132px; /* 필요 시 120~160px 사이로 조정 가능 */
      display: grid; align-content: start; gap: 6px;
    }
    .eyebrow {
      font-size: 14px; color: var(--muted); font-weight: 600; letter-spacing: .02em;
    }
    .title {
      margin-top: 10px;
      font-size: 28px; line-height: 1.2; font-weight: 800; color: #000;
    }

    .visual { position: relative; flex: 1; display: flex; align-items: center; justify-content: center; padding: 24px; }
    .visual img { width: 100%; height: 100%; object-fit: cover; border-radius: calc(var(--card-radius) - 8px); }

    .glow {
      position: absolute; inset: 0; pointer-events: none; border-radius: var(--card-radius);
      background: radial-gradient(120% 120% at 0% 0%, rgba(0,122,255,.15), transparent 45%),
                  radial-gradient(120% 120% at 100% 0%, rgba(88,86,214,.14), transparent 45%),
                  radial-gradient(120% 120% at 100% 100%, rgba(255,45,85,.12), transparent 45%);
    }

    .more-btn {
      position: absolute; right: 16px; bottom: 16px;
      width: 40px; height: 40px; border-radius: 50%;
      border: none; background: rgba(0,0,0,.7); color: #fff; cursor: pointer;
      display: grid; place-items: center; transition: transform .2s ease, background .2s ease;
    }
    .more-btn:hover { transform: scale(1.06); background: rgba(0,0,0,.82); }

    /* 모달 */
    .modal {
      position: fixed; inset: 0; display: none; place-items: center; z-index: 1000;
      background: rgba(0,0,0,.6);
      padding: 24px;
    }
    .modal.open { display: grid; }
    .dialog {
      width: min(960px, 100%);
      max-height: 90dvh;
      overflow: auto;
      background: #fff; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,.3);
      animation: pop .18s ease;
    }
    @keyframes pop { from { transform: scale(.97); opacity: 0 } to { transform: scale(1); opacity: 1 } }

    .dialog-header { display:flex; justify-content: space-between; align-items: center; padding: 20px 24px; border-bottom: 1px solid #eee; }
    .dialog-title { font-size: 24px; font-weight: 800; }
    .close-btn { width: 36px; height: 36px; border-radius: 50%; border: none; background: #f2f2f7; cursor: pointer; display:grid; place-items:center; }
    .dialog-body { padding: 16px 24px 24px; }
    .dialog-visual { border-radius: 16px; overflow: hidden; margin-bottom: 16px; background:#f5f5f7 }
    .dialog-visual img { width: 100%; height: auto; display:block; }
    .dialog-text { color: #333; line-height: 1.7; font-size: 16px; }

    .caption { color: var(--muted); font-size: 13px; margin-top: 8px; }
  </style>
</head>
<body>
  <header class="site-header">
    <h1>양심깨박</h1>
    <p>당신의 선택은 자연에 대한 양보입니다.</p>
  </header>

  <section class="track-wrap">
    <div class="card-track">
      <!-- Card 1 -->
      <article class="card" aria-labelledby="c1-title">
        <div class="card-inner">
          <div class="card-headings">
            <div class="eyebrow">양심깨박 화분 비료</div>
            <h2 class="title" id="c1-title">생명을 일으키는 밑거름</h2>
          </div>
          <div class="visual">
            <img src="image/6b3eedc3-d5a6-4559-b3e3-92e0af85af60.png" alt="iPhone과 Apple Watch 이미지" />
          </div>
          <div class="glow"></div>
          <button class="more-btn" aria-label="더 보기" data-target="modal-1">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
        </div>
      </article>

      <!-- Card 2 -->
      <article class="card" aria-labelledby="c2-title" style="background:#0b0b0b; color:#fff;">
        <div class="card-inner">
          <div class="card-headings">
            <div class="eyebrow" style="color:#a1a1a6">양심깨박 샐러드</div>
            <h2 class="title" id="c2-title" style="color:#fff">자연에 대한 존중으로 만든 신선함</h2>
          </div>
          <div class="visual">
            <img src="image/Untitled-2.png" alt="다크 모드에서 iPhone을 들고 있는 손" />
          </div>
          <button class="more-btn" aria-label="더 보기" data-target="modal-2">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
        </div>
      </article>

      <!-- Card 3 -->
      <article class="card" aria-labelledby="c3-title" style="background:#1e3a68; color:#fff;">
        <div class="card-inner">
          <div class="card-headings">
            <div class="eyebrow" style="color:#c7c7cc">양심깨박 죽</div>
            <h2 class="title" id="c3-title" style="color:#fff">한 숟갈마다 느껴지는 배려</h2>
          </div>
          <div class="visual">
            <img src="image/Untitled-1.png" alt="인물 사진" />
          </div>
          <button class="more-btn" aria-label="더 보기" data-target="modal-3">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
        </div>
      </article>
      
      <!-- Card 4: 볶음밥 -->
      <article class="card" aria-labelledby="c4-title">
        <div class="card-inner">
          <div class="card-headings">
            <div class="eyebrow">양심깨박 볶음밥</div>
            <h2 class="title" id="c4-title">따뜻한 한끼</h2>
          </div>
          <div class="visual">
            <img src="image/Untitled-3.png" alt="따끈한 볶음밥" />
          </div>
          <button class="more-btn" aria-label="더 보기" data-target="modal-4">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
        </div>
      </article>
    </div>
    <!-- 좌우 내비 버튼 -->
    <div class="nav-controls" aria-hidden="false">
      <button class="nav-btn" id="prevBtn" aria-label="이전 카드">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 6l-6 6 6 6" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>
      <button class="nav-btn" id="nextBtn" aria-label="다음 카드">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 6l6 6-6 6" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>
    </div>
  </section>

  <!-- Modals -->
  <div class="modal" id="modal-1" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
    <div class="dialog">
      <div class="dialog-header">
        <h3 class="dialog-title" id="modal-1-title">대중교통을 보다 간편하게.</h3>
        <button class="close-btn" data-close>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6l12 12M18 6L6 18" stroke="#000" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>
      <div class="dialog-body">
        <div class="dialog-visual"><img src="image/6b3eedc3-d5a6-4559-b3e3-92e0af85af60.png" alt="Apple Pay 교통카드 시각" /></div>
        <div class="dialog-text">
          톡 대면 바로 탑승. 이제 iPhone 또는 Apple Watch에서 Apple Pay로 대중교통 요금을 빠르고 간편하게 결제할 수 있습니다. 익스프레스 모드 덕분에 Face ID 또는 Touch ID도 필요 없습니다. 기기를 카드 리더기에 대기만 하면 됩니다.
          <div class="caption">이미지는 예시이며 실제 내용과 다를 수 있습니다.</div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="modal-2" role="dialog" aria-modal="true" aria-labelledby="modal-2-title">
    <div class="dialog">
      <div class="dialog-header">
        <h3 class="dialog-title" id="modal-2-title">날개 달린 가능성</h3>
        <button class="close-btn" data-close>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6l12 12M18 6L6 18" stroke="#000" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>
      <div class="dialog-body">
        <div class="dialog-visual"><img src="image/Untitled-2.png" alt="Apple Intelligence 예시" /></div>
        <div class="dialog-text">
          텍스트, 이미지, 컨텍스트를 이해하는 지능형 기능으로 더 빠르고 쉬운 작업 흐름을 경험하세요. 프라이버시는 기본입니다.
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="modal-3" role="dialog" aria-modal="true" aria-labelledby="modal-3-title">
    <div class="dialog">
      <div class="dialog-header">
        <h3 class="dialog-title" id="modal-3-title">양심깨박 죽</h3>
        <button class="close-btn" data-close>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6l12 12M18 6L6 18" stroke="#000" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>
      <div class="dialog-body">
        <div class="dialog-visual"><img src="image/Untitled-1.png" alt="따뜻한 죽 한 그릇" /></div>
        <div class="dialog-text">곡물과 깨의 담백함으로 속을 편안하게 하는 따뜻한 한 그릇을 담았습니다.</div>
      </div>
    </div>
  </div>

  <div class="modal" id="modal-4" role="dialog" aria-modal="true" aria-labelledby="modal-4-title">
    <div class="dialog">
      <div class="dialog-header">
        <h3 class="dialog-title" id="modal-4-title">양심깨박 볶음밥</h3>
        <button class="close-btn" data-close>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 6l12 12M18 6L6 18" stroke="#000" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
      </div>
      <div class="dialog-body">
        <div class="dialog-visual"><img src="image/Untitled-3.png" alt="고소한 볶음밥" /></div>
        <div class="dialog-text">채소와 곡물을 균형 있게 볶아낸 건강한 한 끼. 갓 볶아 고소하고 담백한 풍미를 즐겨보세요.</div>
      </div>
    </div>
  </div>

  <script>
    // 모달 열기/닫기 핸들러
    const open = (id) => {
      const el = document.getElementById(id);
      if (!el) return;
      el.classList.add('open');
      document.body.style.overflow = 'hidden';
    };
    const close = (modal) => {
      modal.classList.remove('open');
      document.body.style.overflow = '';
    };

    document.querySelectorAll('.more-btn').forEach(btn => {
      btn.addEventListener('click', () => open(btn.dataset.target));
    });

    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) close(modal);
      });
      modal.querySelector('[data-close]')?.addEventListener('click', () => close(modal));
    });

    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        document.querySelectorAll('.modal.open').forEach(close);
      }
    });

    // 좌우 내비 버튼 동작: 현재 스크롤 위치 기준으로 다음/이전 카드로 스냅
    const track = document.querySelector('.card-track');
    const cards = Array.from(document.querySelectorAll('.card'));
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    function updateButtons() {
      const scrollLeft = track.scrollLeft;
      const maxScroll = track.scrollWidth - track.clientWidth - 1;
      prevBtn.disabled = scrollLeft <= 0;
      nextBtn.disabled = scrollLeft >= maxScroll;
    }

    function scrollToIndex(index) {
      const clamped = Math.max(0, Math.min(index, cards.length - 1));
      cards[clamped].scrollIntoView({ behavior: 'smooth', inline: 'start', block: 'nearest' });
      // 버튼 상태 갱신을 약간 지연
      setTimeout(updateButtons, 400);
    }

    function getCurrentIndex() {
      const center = track.scrollLeft + track.clientWidth / 2;
      let bestIdx = 0;
      let bestDist = Infinity;
      cards.forEach((card, i) => {
        const rect = card.getBoundingClientRect();
        const cardCenter = rect.left + rect.width / 2 + track.scrollLeft - track.getBoundingClientRect().left;
        const dist = Math.abs(cardCenter - center);
        if (dist < bestDist) { bestDist = dist; bestIdx = i; }
      });
      return bestIdx;
    }

    prevBtn.addEventListener('click', () => scrollToIndex(getCurrentIndex() - 1));
    nextBtn.addEventListener('click', () => scrollToIndex(getCurrentIndex() + 1));
    track.addEventListener('scroll', () => { requestAnimationFrame(updateButtons); });
    window.addEventListener('resize', updateButtons);
    updateButtons();
  </script>
</body>
</html>
